##一个高仿美团ipad客户端的设计与实现

实现功能：上拉刷新、下拉刷新、自定义UICollectionViewCell、根据拼音进行检索并展示数据，离线缓存团购数据，浏览记录与收藏记录的批量删除，MapKit的使用、自定义大头针等）

###首页：
<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924113049615-924092106.png">

如果没有团购信息：

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924113959240-645633061.png">

使用UIPopoverController弹出菜单栏：

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924114519037-1585621470.png">

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924114530944-460905111.png">

这两个弹出菜单很相似，所以在优化的时候，将之写成了一个通用的双表，类似UITableView那样的设计，通过dataSource里面的方法不断向遵守了dataSource的类要各种数据，从而摆脱了依赖特定的model


下面是搜索的图片，实际上，搜索实现很简单，按照拼音或者关键字来检索下，如果符合条件，就放到数组里面，最后刷新tableView即可：

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924121242600-1288583288.png">

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924121452569-1183710448.png">

首页还存在这样一个菜单界面：

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924122117412-1835746784.png">

也就是菜单界面，动态展示了一些模块，五角星代表这需要展示收藏模块，圆代表着展示浏览记录模块，另外两个并未实现具体功能。
实现这样一个动态的菜单，我使用的是AwesomeMenu这个第三方库，具体实现可以见它github上的示例。


其次就是Collect模块和Browse模块，这两个模块很相似，都是需要实现离线缓存，都是需要支持批量删除的，如此，就完全可以将对象相似的功能提取出来，放到基类里面，而这两个类继承自基类，从而可以大大减少代码量，在代码层次、结构上来看，也会好上很多。

我采用的是Sqlite数据库来进行的离线缓存，是这样设计的，有一个自增长的主键，一个团购(deal)model，团购的id，取出数据时，按照主键的倒序排序。

###浏览记录、收藏界面，删除单个、批量删除功能:


<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924124231084-1797820379.png">

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924124251147-752049605.png">

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924124305334-275229129.png">

这里需要注意的一点就是cell的循环利用功能，你不能只是修改界面展示，而是需要深入去修改导致界面更改的model，这样才可以做到完美的循环利用，不然会导致bug，请注意，在mvc模式下，界面如何展示都是由model决定的，如果要更改，请更改model。还有就是，当点击进去，会是一条团购详情的界面，在这个界面，当我取消收藏之后，回到收藏界面，也是应当同步删除掉取消了收藏的团购数据的，这里需要注意，用Notification发回来的deal和正在展示的那条deal并不会指向同一个内存地址，所以单纯的判断这两条团购数据相等与否是不行的，应当是重写deal的模型的isEqual方法。


###收藏界面：

这是未被收藏的团购：

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924125850365-1492593737.png">

这是被收藏之后的图片：

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924125953194-771953650.png">

当点击分享，会跳出关于分享的界面，只是最简单的分享......


###MapKit，自定义大头针

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924133040834-962248961.png">

<img src = "http://images2015.cnblogs.com/blog/471463/201509/471463-20150924133059928-535660009.png">

MapKit框架中，反地理编码、自定义大头针等技术。

以上，就是这个项目的所有实现内容了，没有做缓存限制，这一点也很简单，直接使用SDWebImage框架提供的，在接受到内存警告时，清理缓存即可。

如果有需要详细了解的，可以参考这博客：http://www.cnblogs.com/ziyi--caolu/p/4834921.html
